<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제 - 누리카페</title>
    <link rel="stylesheet" href="../../assets/css/global.css">
    <link rel="stylesheet" href="../../assets/css/styleguide.css">
    <link rel="stylesheet" href="../../components/navigation/tab-navigation.css">
    <link rel="stylesheet" href="../../components/buttons/nav-buttons.css">
    <link rel="stylesheet" href="payment.css">
    <!-- 결제 모달 CSS 추가 -->
    <link rel="stylesheet" href="../../components/modals/payment-modal.css">
</head>
<body>
    <div class="screen">
        <!-- 재사용 가능한 탭 네비게이션 컴포넌트 -->
        <div id="navigation-container"></div>

        <!-- 네비게이션 버튼 컨테이너 -->
        <div class="nav-buttons"></div>

        <!-- 메인 컨텐츠 -->
        <main class="main-content">
            <!-- 결제 방법 선택 섹션 -->
            <section class="payment-section">
                <div class="payment-methods">
                    <!-- 첫 번째 줄: 2개의 넓은 카드 -->
                    <div class="payment-row-wide">
                        <button class="payment-option wide credit-card" data-method="card">
                            <div class="card-icon">
                                <div class="card-body"></div>
                                <div class="card-chip"></div>
                            </div>
                            <span>신용카드</span>
                        </button>
                        
                        <button class="payment-option wide samsung-pay" data-method="samsung-pay">
                            <img src="../../assets/images/payment-samsung.png" alt="삼성페이 로고" class="payment-logo" />
                            <span>삼성페이</span>
                        </button>
                    </div>
                    
                    <!-- 두 번째 줄: 3개의 좁은 카드 -->
                    <div class="payment-row-narrow">
                        <button class="payment-option narrow kakao-pay" data-method="kakao-pay">
                            <img src="../../assets/images/payment-kakao.png" alt="카카오페이 로고" class="payment-logo" />
                            <span>카카오페이</span>
                        </button>
                        
                        <button class="payment-option narrow naver-pay" data-method="naver-pay">
                            <img src="../../assets/images/payment-naver.png" alt="네이버페이 로고" class="payment-logo" />
                            <span>네이버페이</span>
                        </button>
                        
                        <button class="payment-option narrow voucher" data-method="voucher">
                            <img src="../../assets/images/payment-voucher.png" alt="교환권 아이콘" class="payment-logo" />
                            <span>교환권</span>
                        </button>
                    </div>
                </div>
            </section>

            <!-- 주문내역 섹션 -->
            <section class="order-summary-section">
                <!-- 주문내역 타이틀 -->
                <div class="order-items-title">주문내역</div>
                
                <!-- 주문내역 카드 -->
                <div class="order-items-card">
                    <div class="order-items-header">
                        <span class="header-menu">메뉴</span>
                        <span class="header-quantity">수량</span>
                        <span class="header-price">가격</span>
                    </div>
                    <div class="order-items-divider"></div>
                    <div class="order-items-section" id="orderItemsContainer">
                        <!-- 주문 내역이 동적으로 들어갈 곳 -->
                    </div>
                </div>
            </section>


        </main>

        <!-- 하단 패널은 BottomPanel 컴포넌트로 동적 생성됩니다 -->
    </div>

    <!-- 결제 모달 컨테이너 -->
    <div id="paymentModalContainer">
        <!-- 결제 모달 HTML -->
        <div class="payment-modal" id="paymentModal">
            <div class="modal-overlay"></div>
            <div class="modal-container">
                <div class="modal-header">
                    <h2 class="modal-title">카드를 리더기에 꽂아주세요.</h2>
                </div>
                
                <div class="modal-body">
                    <!-- 카드 리더기 일러스트레이션 영역 -->
                    <div class="card-reader-section">
                        <div class="card-reader-illustration">
                            <!-- 카드 리더기 메인 박스 -->
                            <div class="reader-main-box">
                                <!-- 카드 삽입 슬롯 -->
                                <div class="card-slot"></div>
                                <!-- 리더기 상단 라인 -->
                                <div class="reader-top-line"></div>
                            </div>
                            <!-- 리더기 하단 라인들 -->
                            <div class="reader-bottom-line"></div>
                            <!-- 카드 삽입 방향 화살표 -->
                            <div class="card-arrow-indicator"></div>
                        </div>
                        
                        <!-- 추가 안내 이미지 영역 (아이콘용) -->
                        <div class="instruction-icons">
                            <div class="payment-icon-placeholder">
                                <!-- 결제 방법 아이콘이 들어갈 자리 -->
                                <div class="icon-slot card-icon-slot"></div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 진행 상태 표시 -->
                    <div class="payment-status">
                        <div class="status-message">결제를 진행하고 있습니다...</div>
                        <div class="loading-spinner"></div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <div class="modal-actions">
                        <button class="modal-button cancel-button" type="button">
                            <span class="button-text">취소하기</span>
                        </button>
                        <button class="modal-button retry-button" type="button">
                            <span class="button-text">다시 시도</span>
                        </button>
                    </div>
                </div>
                
                <!-- 닫기 버튼 (상단 우측) -->
                <button class="modal-close-btn" type="button" aria-label="모달 닫기">
                    <div class="close-icon">×</div>
                </button>
            </div>
        </div>
    </div>

    <!-- 컴포넌트 로드 -->
    <script src="../../components/navigation/tab-navigation.js"></script>
    <script src="../../components/buttons/nav-buttons.js"></script>
    <script src="../../components/help/help-system.js"></script>
    <script src="../../components/panels/bottom-panel.js"></script>
    <!-- 결제 모달 JS 추가 -->
    <script src="../../components/modals/payment-modal.js"></script>
    <script src="payment.js"></script>
    
    <script>
        // 탭 네비게이션 초기화
        document.addEventListener('DOMContentLoaded', function() {
            // NavigationButtons 컴포넌트 초기화
            const navButtons = NavigationButtons.createWithTitle('결제 방법을 선택해주세요.', {
                onBackClick: () => {
                    window.location.href = '../point/point.html';
                },
                onHomeClick: () => {
                    // 모든 데이터 정리
                    localStorage.removeItem('selectedMenuItems');
                    localStorage.removeItem('completedCoffees');
                    localStorage.removeItem('finalOrder');
                    localStorage.removeItem('finalOrderWithDiscount');
                    localStorage.removeItem('finalOrderWithPoint');
                    
                    window.location.href = '../../index.html';
                }
            });

            const tabNav = new TabNavigation({
                container: document.getElementById('navigation-container'),
                activeTab: 'payment' // 결제 탭 활성화
            });
        });
    </script>
</body>
</html> 